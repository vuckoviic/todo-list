(()=>{"use strict";var e={d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){document.getElementById("content").innerHTML=""}function n(e){e.setAttribute("data-editing","true"),console.log("Div IS being edited right now");const t=document.createElement("input"),n=document.createElement("textarea"),l=document.createElement("input"),o=document.createElement("select"),i=document.createElement("option"),d=document.createElement("option"),r=document.createElement("option");i.innerText="Low",d.innerText="Normal",r.innerText="High",i.setAttribute("value","low"),d.setAttribute("value","normal"),r.setAttribute("value","high");const c=e.children,m=c.item(0),g=c.item(1).innerText,h=c.item(2).innerText,y=c.item(3).innerText,v=e.getAttribute("data-priority");m.disabled=!0,t.value=g,n.innerText=h,l.value=y,o.innerText=v,o.appendChild(i),o.appendChild(d),o.appendChild(r),"low"==v?i.selected=!0:"normal"==v?d.selected=!0:"high"==v&&(r.selected=!0),l.type="date",e.appendChild(t),e.appendChild(n),e.appendChild(l),e.appendChild(o),e.removeChild(c.item(1)),e.removeChild(c.item(1)),e.removeChild(c.item(1));const b=document.createElement("button"),E=document.createElement("button"),C=document.createElement("button");b.classList.add("editButton","saveEditButton"),E.classList.add("editButton","closeEditButton"),C.classList.add("editButton","deleteEditButton"),b.innerText="Save",E.innerText="Close",C.innerText="Delete",e.appendChild(C),e.appendChild(E),e.appendChild(b),C.addEventListener("click",(()=>{u.removeChild(e);const t=parseInt(e.getAttribute("data-index"));a.pop(a[t]),e.setAttribute("data-editing","false"),console.log("Div IS NOT being edited right now.")})),E.addEventListener("click",(()=>{const i=document.createElement("h3"),d=document.createElement("p"),a=document.createElement("p");e.setAttribute("data-priority",v),i.innerText=g,d.innerText=h,d.style.fontStyle="italic",a.innerText=y,e.appendChild(i),e.appendChild(d),e.appendChild(a),e.removeChild(t),e.removeChild(n),e.removeChild(l),e.removeChild(o),e.removeChild(b),e.removeChild(E),e.removeChild(C),m.disabled=!1,e.setAttribute("data-editing","false"),console.log("Div IS NOT being edited right now.")})),b.addEventListener("click",(()=>{const i=document.createElement("h3"),d=document.createElement("p"),r=document.createElement("p");i.innerText=t.value,d.innerText=n.value,d.style.fontStyle="italic",r.innerText=l.value;const c=parseInt(e.getAttribute("data-index"));a[c].title=t.value,a[c].description=n.value,a[c].dueDate=l.value,a[c].priority=o.value,s=o.value,p(e),e.setAttribute("data-priority",o.value),console.log(a[c]),console.log("Saved item's priority is: "+a[c].priority),e.appendChild(i),e.appendChild(d),e.appendChild(r),e.removeChild(t),e.removeChild(n),e.removeChild(l),e.removeChild(o),e.removeChild(b),e.removeChild(E),e.removeChild(C),m.disabled=!1,e.setAttribute("data-editing","false"),console.log("Div IS NOT being edited right now.")}))}function l(){console.log("Storage has been updated");let e=JSON.stringify(i),t=JSON.stringify(d),n=JSON.stringify(r);console.log(e),console.log(t),console.log(n),localStorage.setItem("inboxArray",e),localStorage.setItem("allProjects",t),localStorage.setItem("allProjectArrays",n)}let o;e.d({},{q7:()=>k,B5:()=>E,r3:()=>b,OS:()=>I,ar:()=>x,dt:()=>T}),o=document.getElementById("inbox");let i=[],d=[];d.push(o);let a,r=[];r.push(i),a=i;const c=document.getElementById("content");let s;function p(e){e.style.backgroundColor="low"===s?"lightblue":"normal"==s?"rgb(51, 126, 245)":"red"}function m(e){if(s=e.target.parentElement.getAttribute("data-priority"),!0===e.target.checked){e.target.parentElement.style.backgroundColor="green",console.log("Div is checked"),e.target.parentElement.setAttribute("data-checked","true");let t=e.target.parentElement.getAttribute("data-index");a[t].checked=!0,console.log(a[t].checked)}else{"low"===s?(e.target.parentElement.style.backgroundColor="lightblue",console.log("Div is not checked"),e.target.parentElement.setAttribute("data-checked","false")):"normal"==s?(e.target.parentElement.style.backgroundColor="rgb(51, 126, 245)",console.log("Div is not checked"),e.target.parentElement.setAttribute("data-checked","false")):(e.target.parentElement.style.backgroundColor="red",console.log("Div is not checked"),e.target.parentElement.setAttribute("data-checked","false"));let t=e.target.parentElement.getAttribute("data-index");a[t].checked=!1,console.log(a[t].checked)}}o.classList.add("active-project"),o.addEventListener("click",(()=>{t(),E.disabled=!0,E.style.backgroundColor="grey";for(let e=0;e<d.length;e++)d[e].classList.remove("active-project"),d[e].displayed=!1,y=0;o.classList.add("active-project");for(let e=0;e<d.length;e++)d[e].classList.contains("active-project")&&(a=r[e],l());for(let e=0;e<i.length;e++){for(let t=0;t<i[e].length;t++)i[e][t].displayed=!1,console.log(i[e][t]);console.log("displayedItems: "+y),y=0,v(i[e])}c.appendChild(I),console.log(c.children.length);for(const e of c.children)e.firstChild.disabled=!0}));const u=document.getElementById("content");let g;const h=document.getElementById("inbox");let y=0;function v(e){for(let t=y;t<e.length;t++){g=document.createElement("div");const l=document.createElement("input");l.type="checkbox",l.classList.add("checkbox");const o=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div");o.innerHTML="<h3>"+e[t].title+"</h3>",i.innerHTML="<p>"+e[t].description+"</p>",d.innerHTML="<p>"+e[t].dueDate+"</p>",s=e[t].priority,p(g),g.setAttribute("data-priority",s),g.setAttribute("data-index",t),g.setAttribute("data-checked","false"),g.setAttribute("data-editing","false"),1==e[t].checked?(l.checked=!0,g.setAttribute("data-checked","true"),g.style.backgroundColor="green"):(l.checked=!1,g.setAttribute("data-checked","false")),g.appendChild(l),g.appendChild(o),g.appendChild(i),g.appendChild(d),g.classList.add("showItemDiv"),i.classList.add("showDescription"),u.appendChild(g),l.addEventListener("click",m),g.addEventListener("click",(e=>{e.target==g&&"false"==g.getAttribute("data-checked")&&"false"==g.getAttribute("data-editing")&&0==h.classList.contains("active-project")&&n(e.target)})),e[t].displayed=!0,y++}}const b=document.getElementsByTagName("dialog")[0],E=document.getElementById("addItem");E.disabled=!0,1==E.disabled?E.style.backgroundColor="grey":E.style.backgroundColor="navy";const C=document.getElementById("closeDialog"),f=document.getElementsByTagName("form")[0];E.addEventListener("click",(()=>{b.showModal(),f.reset()})),C.addEventListener("click",(()=>{b.close()}));class k{constructor(e,t,n,l){this.title=e,this.description=t,this.dueDate=n,this.priority=l}}document.getElementById("createTodoItem").addEventListener("click",(()=>{!function(e){const t=document.getElementById("title").value,n=document.getElementById("description").value,o=document.getElementById("dueDate").value;if(s=document.getElementById("priority").value,t.length<1)alert("Please Insert a Title.");else if(n.length<1)alert("Please Insert a Description.");else if(""===o)alert("Please Choose Your Due Date.");else{const l=new k(t,n,o,s);console.log(l),console.log(e),e.push(l),v(e),b.close()}l()}(a)}));const x=document.getElementById("newProject"),T=document.getElementById("projects");x.addEventListener("click",(function(){const e=document.createElement("div"),n=document.createElement("button"),o=document.createElement("input"),s=document.createElement("button"),p=document.createElement("button");s.innerText="Save",p.innerText="Exit",n.style.padding="9px",s.style.backgroundColor="white",s.style.maxHeight="15px",s.style.maxWidth="15px",s.style.fontSize="1em",s.style.color="navy",s.style.marginTop="5px",p.style.backgroundColor="white",p.style.maxHeight="15px",p.style.maxWidth="15px",p.style.fontSize="1em",p.style.color="navy",p.style.marginTop="5px",n.appendChild(o),n.appendChild(p),n.appendChild(s),e.appendChild(n),s.addEventListener("click",(()=>{let s=o.value;if(s.length<1)alert("Please Insert Name For Your Project.");else{n.innerText=s,s=new Array,r.push(s),i.push(s),n.addEventListener("click",(e=>{t(),E.disabled=!1,E.style.backgroundColor="navy";for(let e=0;e<d.length;e++)d[e].classList.remove("active-project"),d[e].displayed=!1,y=0;n.classList.add("active-project");for(let e=0;e<d.length;e++)d[e].classList.contains("active-project")&&(a=r[e]);v(a)}));const o=document.createElement("button");o.innerText="â†»",o.addEventListener("click",(()=>{e.innerHTML="",e.appendChild(n);for(let t=0;t<s.length;t++){const n=document.createElement("p");n.innerText=`${s[t].title} | ${s[t].dueDate}`,1==c.firstChild.firstChild.checked?n.style.backgroundColor="green":"low"==s[t].priority?n.style.backgroundColor="lightblue":"normal"==s[t].priority?n.style.backgroundColor="rgb(51, 126, 245)":n.style.backgroundColor="red",n.style.padding="2px",n.style.marginTop="3px",e.appendChild(n)}})),o.setAttribute("id","refresh-project"),n.appendChild(o),n.classList.add("project"),l()}})),p.addEventListener("click",(()=>{e.removeChild(n),T.removeChild(e)})),T.removeChild(x),T.appendChild(e),T.appendChild(x),d.push(n)}));const L=document.getElementById("content"),I=document.createElement("p");I.innerHTML="The inbox section is for <b>review only</b>. You can't create, edit or check todo items here. You need to create separate project for that.",I.style.fontStyle="italic",I.style.position="absolute",I.style.bottom="5px",L.style.position="relative",L.appendChild(I),null===localStorage.getItem("inboxArray")?(console.log("There is no such this as 'inboxArray' inside localStorage. I will populate it now..."),l()):function(){console.log("Reading values...");const e=localStorage.getItem("inboxArray"),t=localStorage.getItem("allProjectArrays"),n=localStorage.getItem("allProjects");i=JSON.parse(e),r=JSON.parse(t),d=JSON.parse(n),console.log(i),console.log(r),console.log(d),console.log("~~~~~~~~~~~~~~~~~~~~~~~"),o.classList.add("active-project");for(let e=0;e<d.length;e++)console.log(d[e]),d[e].classList.contains("active-project")&&(a=r[e]);for(let e=0;e<i.length;e++){for(let t=0;t<i[e].length;t++)i[e][t].displayed=!1,console.log(i[e][t]);console.log("displayedItems: "+y),y=0,v(i[e])}}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSyxJQUFJTSxFQUFJLEVBQUdBLEVBQUl2QixFQUFXaUIsR0FBR0MsT0FBUUssSUFDdEN2QixFQUFXaUIsR0FBR00sR0FBR0gsV0FBWSxFQUM3QnJFLFFBQVFDLElBQUlnRCxFQUFXaUIsR0FBR00sSUFHOUJ4RSxRQUFRQyxJQUFJLG1CQUFxQnFFLEdBQ2pDQSxFQUFpQixFQUNqQkcsRUFBYXhCLEVBQVdpQixHQUM1QixDQUNKLENNMEJJa0QsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9jbGVhckNvbnRlbnQuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2VkaXRTaG93SXRlbS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbG9jYWxTdG9yYWdlLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvY3JlYXRlVG9kb0l0ZW0uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3NldHRpbmdQcmlvcml0eS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvY2hlY2tDaGVja2JveC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc2hvd2luZ0l0ZW1zLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBmdW5jdGlvbiBjbGVhckNvbnRlbnQoKSB7XG4gICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbiAgICBjb250ZW50LmlubmVySFRNTCA9IFwiXCI7XG59IiwiaW1wb3J0IHsgYWN0aXZlQXJyYXkgfSBmcm9tIFwiLi9wcm9qZWN0cy5qc1wiO1xuaW1wb3J0IHsgc2V0dGluZ1ByaW9yaXR5IH0gZnJvbSBcIi4vc2V0dGluZ1ByaW9yaXR5XCI7XG5pbXBvcnQgeyBzaG93SXRlbSB9IGZyb20gXCIuL3Nob3dpbmdJdGVtc1wiO1xuaW1wb3J0IHsgY29udGVudCB9IGZyb20gXCIuL3Nob3dpbmdJdGVtc1wiO1xuaW1wb3J0IHsgcHJpb3JpdHkgfSBmcm9tIFwiLi9jcmVhdGVUb2RvSXRlbVwiO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBlZGl0U2hvd0l0ZW0oc2hvd0l0ZW0pIHtcblxuICAgIHNob3dJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtZWRpdGluZ1wiLCBcInRydWVcIik7XG4gICAgY29uc29sZS5sb2coXCJEaXYgSVMgYmVpbmcgZWRpdGVkIHJpZ2h0IG5vd1wiKTtcblxuICAgIGNvbnN0IGlucHV0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgY29uc3QgaW5wdXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICBjb25zdCBpbnB1dER1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgY29uc3QgaW5wdXRQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XG5cbiAgICBjb25zdCBvcHRpb25Mb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIGNvbnN0IG9wdGlvbk5vcm1hbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgY29uc3Qgb3B0aW9uSGlnaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG5cbiAgICBvcHRpb25Mb3cuaW5uZXJUZXh0ID0gXCJMb3dcIjtcbiAgICBvcHRpb25Ob3JtYWwuaW5uZXJUZXh0ID0gXCJOb3JtYWxcIjtcbiAgICBvcHRpb25IaWdoLmlubmVyVGV4dCA9IFwiSGlnaFwiO1xuXG4gICAgb3B0aW9uTG93LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwibG93XCIpOyBcbiAgICBvcHRpb25Ob3JtYWwuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJub3JtYWxcIik7XG4gICAgb3B0aW9uSGlnaC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBcImhpZ2hcIik7XG5cblxuICAgIGNvbnN0IGNoaWxkcmVuID0gc2hvd0l0ZW0uY2hpbGRyZW47XG4gICAgY29uc3QgY2hlY2tib3ggPSBjaGlsZHJlbi5pdGVtKDApO1xuICAgIGNvbnN0IG9yaWdpbmFsVGl0bGUgPSBjaGlsZHJlbi5pdGVtKDEpLmlubmVyVGV4dDtcbiAgICBjb25zdCBvcmlnaW5hbERlc2NyaXB0aW9uID0gY2hpbGRyZW4uaXRlbSgyKS5pbm5lclRleHQ7XG4gICAgY29uc3Qgb3JpZ2luYWxEdWVEYXRlID0gY2hpbGRyZW4uaXRlbSgzKS5pbm5lclRleHQ7XG4gICAgY29uc3Qgb3JpZ2luYWxQcmlvcml0eSA9IHNob3dJdGVtLmdldEF0dHJpYnV0ZShcImRhdGEtcHJpb3JpdHlcIik7XG5cbiAgICBjaGVja2JveC5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICBpbnB1dFRpdGxlLnZhbHVlID0gb3JpZ2luYWxUaXRsZTtcbiAgICBpbnB1dERlc2NyaXB0aW9uLmlubmVyVGV4dCA9IG9yaWdpbmFsRGVzY3JpcHRpb247XG4gICAgaW5wdXREdWVEYXRlLnZhbHVlID0gb3JpZ2luYWxEdWVEYXRlO1xuICAgIGlucHV0UHJpb3JpdHkuaW5uZXJUZXh0ID0gb3JpZ2luYWxQcmlvcml0eTtcblxuICAgIGlucHV0UHJpb3JpdHkuYXBwZW5kQ2hpbGQob3B0aW9uTG93KTtcbiAgICBpbnB1dFByaW9yaXR5LmFwcGVuZENoaWxkKG9wdGlvbk5vcm1hbCk7XG4gICAgaW5wdXRQcmlvcml0eS5hcHBlbmRDaGlsZChvcHRpb25IaWdoKTtcbiAgICBcbiAgICBpZiAob3JpZ2luYWxQcmlvcml0eSA9PSBcImxvd1wiKSB7XG4gICAgICAgIG9wdGlvbkxvdy5zZWxlY3RlZCA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIGVsc2UgaWYgKG9yaWdpbmFsUHJpb3JpdHkgPT0gXCJub3JtYWxcIikge1xuICAgICAgICBvcHRpb25Ob3JtYWwuc2VsZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICBlbHNlIGlmIChvcmlnaW5hbFByaW9yaXR5ID09IFwiaGlnaFwiKSB7XG4gICAgICAgIG9wdGlvbkhpZ2guc2VsZWN0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlucHV0RHVlRGF0ZS50eXBlID0gXCJkYXRlXCI7XG4gICAgXG4gICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQoaW5wdXRUaXRsZSk7XG4gICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQoaW5wdXREZXNjcmlwdGlvbik7XG4gICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQoaW5wdXREdWVEYXRlKTtcbiAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChpbnB1dFByaW9yaXR5KTtcblxuXG4gICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoY2hpbGRyZW4uaXRlbSgxKSk7XG4gICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoY2hpbGRyZW4uaXRlbSgxKSk7XG4gICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoY2hpbGRyZW4uaXRlbSgxKSk7XG5cbiAgICBjb25zdCBzYXZlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblxuICAgIHNhdmVCdXR0b24uY2xhc3NMaXN0LmFkZChcImVkaXRCdXR0b25cIiwgXCJzYXZlRWRpdEJ1dHRvblwiKTtcbiAgICBjbG9zZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZWRpdEJ1dHRvblwiLCBcImNsb3NlRWRpdEJ1dHRvblwiKTtcbiAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZChcImVkaXRCdXR0b25cIiwgXCJkZWxldGVFZGl0QnV0dG9uXCIpO1xuXG4gICAgc2F2ZUJ1dHRvbi5pbm5lclRleHQgPSBcIlNhdmVcIjtcbiAgICBjbG9zZUJ1dHRvbi5pbm5lclRleHQgPSBcIkNsb3NlXCI7XG4gICAgZGVsZXRlQnV0dG9uLmlubmVyVGV4dCA9IFwiRGVsZXRlXCI7XG5cbiAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xuICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcbiAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChzYXZlQnV0dG9uKTtcblxuICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb250ZW50LnJlbW92ZUNoaWxkKHNob3dJdGVtKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChzaG93SXRlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIpKTtcbiAgICAgICAgYWN0aXZlQXJyYXkucG9wKGFjdGl2ZUFycmF5W2luZGV4XSk7XG4gICAgICAgIHNob3dJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtZWRpdGluZ1wiLCBcImZhbHNlXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkRpdiBJUyBOT1QgYmVpbmcgZWRpdGVkIHJpZ2h0IG5vdy5cIik7XG4gICAgfSk7XG5cbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgY29uc3QgbmV3RGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgY29uc3QgbmV3RHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICBjb25zdCBuZXdQcmlvcml0eSA9IHNob3dJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtcHJpb3JpdHlcIiwgb3JpZ2luYWxQcmlvcml0eSk7XG5cbiAgICAgICAgbmV3VGl0bGUuaW5uZXJUZXh0ID0gb3JpZ2luYWxUaXRsZTtcbiAgICAgICAgbmV3RGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gb3JpZ2luYWxEZXNjcmlwdGlvbjtcbiAgICAgICAgbmV3RGVzY3JpcHRpb24uc3R5bGUuZm9udFN0eWxlID0gXCJpdGFsaWNcIjtcbiAgICAgICAgbmV3RHVlRGF0ZS5pbm5lclRleHQgPSBvcmlnaW5hbER1ZURhdGU7XG5cbiAgICAgICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQobmV3VGl0bGUpO1xuICAgICAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChuZXdEZXNjcmlwdGlvbik7XG4gICAgICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKG5ld0R1ZURhdGUpO1xuXG4gICAgICAgIHNob3dJdGVtLnJlbW92ZUNoaWxkKGlucHV0VGl0bGUpO1xuICAgICAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChpbnB1dERlc2NyaXB0aW9uKTtcbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoaW5wdXREdWVEYXRlKTtcbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoaW5wdXRQcmlvcml0eSk7XG5cbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoc2F2ZUJ1dHRvbik7XG4gICAgICAgIHNob3dJdGVtLnJlbW92ZUNoaWxkKGNsb3NlQnV0dG9uKTtcbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoZGVsZXRlQnV0dG9uKTtcblxuICAgICAgICBjaGVja2JveC5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gICAgICAgIHNob3dJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtZWRpdGluZ1wiLCBcImZhbHNlXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkRpdiBJUyBOT1QgYmVpbmcgZWRpdGVkIHJpZ2h0IG5vdy5cIik7XG4gICAgfSlcblxuICAgIHNhdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gICAgICAgIGNvbnN0IG5ld0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIGNvbnN0IG5ld0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcblxuICAgICAgICBuZXdUaXRsZS5pbm5lclRleHQgPSBpbnB1dFRpdGxlLnZhbHVlO1xuICAgICAgICBuZXdEZXNjcmlwdGlvbi5pbm5lclRleHQgPSBpbnB1dERlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICBuZXdEZXNjcmlwdGlvbi5zdHlsZS5mb250U3R5bGUgPSBcIml0YWxpY1wiO1xuICAgICAgICBuZXdEdWVEYXRlLmlubmVyVGV4dCA9IGlucHV0RHVlRGF0ZS52YWx1ZTtcblxuICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KHNob3dJdGVtLmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIikpO1xuICAgICAgICBhY3RpdmVBcnJheVtpbmRleF0udGl0bGUgPSBpbnB1dFRpdGxlLnZhbHVlO1xuICAgICAgICBhY3RpdmVBcnJheVtpbmRleF0uZGVzY3JpcHRpb24gPSBpbnB1dERlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICBhY3RpdmVBcnJheVtpbmRleF0uZHVlRGF0ZT0gaW5wdXREdWVEYXRlLnZhbHVlO1xuICAgICAgICBhY3RpdmVBcnJheVtpbmRleF0ucHJpb3JpdHkgPSBpbnB1dFByaW9yaXR5LnZhbHVlO1xuXG4gICAgICAgIHByaW9yaXR5ID0gaW5wdXRQcmlvcml0eS52YWx1ZTtcblxuICAgICAgICBzZXR0aW5nUHJpb3JpdHkoc2hvd0l0ZW0pO1xuXG4gICAgICAgIGNvbnN0IG5ld1ByaW9yaXR5ID0gc2hvd0l0ZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1wcmlvcml0eVwiLCBpbnB1dFByaW9yaXR5LnZhbHVlKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhhY3RpdmVBcnJheVtpbmRleF0pO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlNhdmVkIGl0ZW0ncyBwcmlvcml0eSBpczogXCIgKyBhY3RpdmVBcnJheVtpbmRleF0ucHJpb3JpdHkpO1xuXG4gICAgICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKG5ld1RpdGxlKTtcbiAgICAgICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQobmV3RGVzY3JpcHRpb24pO1xuICAgICAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChuZXdEdWVEYXRlKTtcblxuICAgICAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChpbnB1dFRpdGxlKTtcbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoaW5wdXREZXNjcmlwdGlvbik7XG4gICAgICAgIHNob3dJdGVtLnJlbW92ZUNoaWxkKGlucHV0RHVlRGF0ZSk7XG4gICAgICAgIHNob3dJdGVtLnJlbW92ZUNoaWxkKGlucHV0UHJpb3JpdHkpO1xuXG4gICAgICAgIHNob3dJdGVtLnJlbW92ZUNoaWxkKHNhdmVCdXR0b24pO1xuICAgICAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChjbG9zZUJ1dHRvbik7XG4gICAgICAgIHNob3dJdGVtLnJlbW92ZUNoaWxkKGRlbGV0ZUJ1dHRvbik7XG5cbiAgICAgICAgY2hlY2tib3guZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgICAgICBzaG93SXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWVkaXRpbmdcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJEaXYgSVMgTk9UIGJlaW5nIGVkaXRlZCByaWdodCBub3cuXCIpO1xuICAgIH0pO1xuXG59IiwiaW1wb3J0IHsgYWN0aXZlQXJyYXksIGFsbFByb2plY3RBcnJheXMsIGFsbFByb2plY3RzLCBpbmJveEFycmF5LCBpbmJveCB9IGZyb20gXCIuL3Byb2plY3RzXCI7XG5pbXBvcnQgeyBkaXNwbGF5ZWRJdGVtcyB9IGZyb20gXCIuL3Nob3dpbmdJdGVtc1wiO1xuaW1wb3J0IHsgc2hvd2luZ0l0ZW1zIH0gZnJvbSBcIi4vc2hvd2luZ0l0ZW1zXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZXMoKSB7XG5cbiAgICBjb25zb2xlLmxvZyhcIlJlYWRpbmcgdmFsdWVzLi4uXCIpO1xuXG4gICAgY29uc3Qgc2F2ZWRJbmJveEFycmF5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJpbmJveEFycmF5XCIpO1xuICAgIGNvbnN0IHNhdmVkQWxsUHJvamVjdEFycmF5cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYWxsUHJvamVjdEFycmF5c1wiKTtcbiAgICBjb25zdCBzYXZlZEFsbFByb2plY3RzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJhbGxQcm9qZWN0c1wiKTtcblxuICAgIGluYm94QXJyYXkgPSBKU09OLnBhcnNlKHNhdmVkSW5ib3hBcnJheSk7XG4gICAgYWxsUHJvamVjdEFycmF5cyA9IEpTT04ucGFyc2Uoc2F2ZWRBbGxQcm9qZWN0QXJyYXlzKTtcbiAgICBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2Uoc2F2ZWRBbGxQcm9qZWN0cyk7ICAgIFxuXG4gICAgY29uc29sZS5sb2coaW5ib3hBcnJheSk7XG4gICAgY29uc29sZS5sb2coYWxsUHJvamVjdEFycmF5cyk7XG4gICAgY29uc29sZS5sb2coYWxsUHJvamVjdHMpO1xuICAgIGNvbnNvbGUubG9nKFwifn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cIik7XG5cbiAgICAvLyBoZXJlIGdvZXMgbG9naWMgd2hpY2ggdHVybnMgdGhpcyBpbmZvcm1hdGlvbiBpbnRvIHJlYWwgRE9NIGVsZW1lbnRzXG5cbiAgICBpbmJveC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLXByb2plY3RcIik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFByb2plY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGFsbFByb2plY3RzW2ldKTtcbiAgICAgICAgaWYgKGFsbFByb2plY3RzW2ldLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZS1wcm9qZWN0XCIpKSB7XG4gICAgICAgICAgICBhY3RpdmVBcnJheSA9IGFsbFByb2plY3RBcnJheXNbaV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluYm94QXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbmJveEFycmF5W2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpbmJveEFycmF5W2ldW2pdLmRpc3BsYXllZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coaW5ib3hBcnJheVtpXVtqXSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhcImRpc3BsYXllZEl0ZW1zOiBcIiArIGRpc3BsYXllZEl0ZW1zKTtcbiAgICAgICAgZGlzcGxheWVkSXRlbXMgPSAwO1xuICAgICAgICBzaG93aW5nSXRlbXMoaW5ib3hBcnJheVtpXSk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9wdWxhdGVTdG9yYWdlKCkge1xuXG4gICAgY29uc29sZS5sb2coXCJTdG9yYWdlIGhhcyBiZWVuIHVwZGF0ZWRcIik7XG5cbiAgICBsZXQgc3RyaW5naWZpZWRJbmJveEFycmF5ID0gSlNPTi5zdHJpbmdpZnkoaW5ib3hBcnJheSk7XG4gICAgbGV0IHN0cmluZ2lmaWVkQWxsUHJvamVjdHMgPSBKU09OLnN0cmluZ2lmeShhbGxQcm9qZWN0cyk7XG4gICAgbGV0IHN0cmluZ2lmaWVkQWxsUHJvamVjdEFycmF5cyA9IEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RBcnJheXMpO1xuXG4gICAgY29uc29sZS5sb2coc3RyaW5naWZpZWRJbmJveEFycmF5KTtcbiAgICBjb25zb2xlLmxvZyhzdHJpbmdpZmllZEFsbFByb2plY3RzKTtcbiAgICBjb25zb2xlLmxvZyhzdHJpbmdpZmllZEFsbFByb2plY3RBcnJheXMpO1xuXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJpbmJveEFycmF5XCIsIHN0cmluZ2lmaWVkSW5ib3hBcnJheSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhbGxQcm9qZWN0c1wiLCBzdHJpbmdpZmllZEFsbFByb2plY3RzKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImFsbFByb2plY3RBcnJheXNcIiwgc3RyaW5naWZpZWRBbGxQcm9qZWN0QXJyYXlzKTtcbn1cbiIsImltcG9ydCB7IHByb2plY3RzLCBuZXdQcm9qZWN0QnV0dG9uLCBhZGRJdGVtLCBpbmZvcm1hdGlvbmFsUCB9IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjbGVhckNvbnRlbnQgfSBmcm9tIFwiLi9jbGVhckNvbnRlbnQuanNcIjtcbmltcG9ydCB7IGRpc3BsYXllZEl0ZW1zLCBzaG93aW5nSXRlbXMsIHNob3dJdGVtIH0gZnJvbSBcIi4vc2hvd2luZ0l0ZW1zLmpzXCI7XG5pbXBvcnQgeyBpbmRleCB9IGZyb20gXCIuL2VkaXRTaG93SXRlbS5qc1wiO1xuaW1wb3J0IHsgZ2V0VmFsdWVzLCBwb3B1bGF0ZVN0b3JhZ2UgfSBmcm9tIFwiLi9sb2NhbFN0b3JhZ2UuanNcIjtcblxuZXhwb3J0IGxldCBpbmJveDtcbmluYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmJveFwiKTtcbmV4cG9ydCBsZXQgaW5ib3hBcnJheSA9IFtdO1xuXG5leHBvcnQgbGV0IGFsbFByb2plY3RzID0gW107XG5hbGxQcm9qZWN0cy5wdXNoKGluYm94KTtcblxuZXhwb3J0IGxldCBhbGxQcm9qZWN0QXJyYXlzID0gW107XG5hbGxQcm9qZWN0QXJyYXlzLnB1c2goaW5ib3hBcnJheSk7XG5leHBvcnQgbGV0IGFjdGl2ZUFycmF5O1xuXG5hY3RpdmVBcnJheSA9IGluYm94QXJyYXk7XG5cbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG5cbmluYm94LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtcHJvamVjdFwiKTtcbmluYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+IHtcbiAgICAgICAgICAgICAgICBcbiAgICBjbGVhckNvbnRlbnQoKTtcblxuICAgIGFkZEl0ZW0uZGlzYWJsZWQgPSB0cnVlO1xuICAgIGFkZEl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmV5XCI7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxQcm9qZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhbGxQcm9qZWN0c1tpXS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLXByb2plY3RcIik7XG4gICAgICAgIGFsbFByb2plY3RzW2ldLmRpc3BsYXllZCA9IGZhbHNlO1xuICAgICAgICBkaXNwbGF5ZWRJdGVtcyA9IDA7XG4gICAgfVxuXG4gICAgaW5ib3guY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1wcm9qZWN0XCIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxQcm9qZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYWxsUHJvamVjdHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlLXByb2plY3RcIikpIHtcbiAgICAgICAgICAgIGFjdGl2ZUFycmF5ID0gYWxsUHJvamVjdEFycmF5c1tpXTtcbiAgICAgICAgICAgIHBvcHVsYXRlU3RvcmFnZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmJveEFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW5ib3hBcnJheVtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaW5ib3hBcnJheVtpXVtqXS5kaXNwbGF5ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGluYm94QXJyYXlbaV1bal0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJkaXNwbGF5ZWRJdGVtczogXCIgKyBkaXNwbGF5ZWRJdGVtcyk7XG4gICAgICAgIGRpc3BsYXllZEl0ZW1zID0gMDtcbiAgICAgICAgc2hvd2luZ0l0ZW1zKGluYm94QXJyYXlbaV0pO1xuICAgIH1cbiAgICBcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGluZm9ybWF0aW9uYWxQKTtcblxuICAgIGNvbnNvbGUubG9nKGNvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoKTtcblxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY29udGVudC5jaGlsZHJlbikge1xuICAgICAgICBjaGlsZC5maXJzdENoaWxkLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBnZXRWYWx1ZXMoKTtcblxuXG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5ld1Byb2plY3QoKSB7XG5cbiAgICBjb25zdCBwcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBcbiAgICBjb25zdCBwcm9qZWN0TmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGNvbnN0IHByb2plY3RTYXZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBjb25zdCBwcm9qZWN0RXhpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgXG4gICAgcHJvamVjdFNhdmUuaW5uZXJUZXh0ID0gXCJTYXZlXCI7XG4gICAgcHJvamVjdEV4aXQuaW5uZXJUZXh0ID0gXCJFeGl0XCI7XG5cbiAgICBwcm9qZWN0LnN0eWxlLnBhZGRpbmcgPSBcIjlweFwiO1xuXG4gICAgcHJvamVjdFNhdmUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuICAgIHByb2plY3RTYXZlLnN0eWxlLm1heEhlaWdodCA9IFwiMTVweFwiO1xuICAgIHByb2plY3RTYXZlLnN0eWxlLm1heFdpZHRoID0gXCIxNXB4XCI7XG4gICAgcHJvamVjdFNhdmUuc3R5bGUuZm9udFNpemUgPSBcIjFlbVwiO1xuICAgIHByb2plY3RTYXZlLnN0eWxlLmNvbG9yID0gXCJuYXZ5XCI7XG4gICAgcHJvamVjdFNhdmUuc3R5bGUubWFyZ2luVG9wID0gXCI1cHhcIjtcblxuICAgIHByb2plY3RFeGl0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbiAgICBwcm9qZWN0RXhpdC5zdHlsZS5tYXhIZWlnaHQgPSBcIjE1cHhcIjtcbiAgICBwcm9qZWN0RXhpdC5zdHlsZS5tYXhXaWR0aCA9IFwiMTVweFwiO1xuICAgIHByb2plY3RFeGl0LnN0eWxlLmZvbnRTaXplID0gXCIxZW1cIjtcbiAgICBwcm9qZWN0RXhpdC5zdHlsZS5jb2xvciA9IFwibmF2eVwiO1xuICAgIHByb2plY3RFeGl0LnN0eWxlLm1hcmdpblRvcCA9IFwiNXB4XCI7XG5cbiAgICBwcm9qZWN0LmFwcGVuZENoaWxkKHByb2plY3ROYW1lSW5wdXQpO1xuICAgIHByb2plY3QuYXBwZW5kQ2hpbGQocHJvamVjdEV4aXQpO1xuICAgIHByb2plY3QuYXBwZW5kQ2hpbGQocHJvamVjdFNhdmUpO1xuXG4gICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZChwcm9qZWN0KTtcbiAgICBcbiAgICBwcm9qZWN0U2F2ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBcbiAgICAgICAgbGV0IG5hbWUgPSBwcm9qZWN0TmFtZUlucHV0LnZhbHVlO1xuICAgICAgICBcbiAgICAgICAgaWYgKG5hbWUubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2UgSW5zZXJ0IE5hbWUgRm9yIFlvdXIgUHJvamVjdC5cIik7XG4gICAgICAgIH1cblxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByb2plY3QuaW5uZXJUZXh0ID0gbmFtZTtcbiAgICAgICAgICAgIG5hbWUgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIGFsbFByb2plY3RBcnJheXMucHVzaChuYW1lKTtcbiAgICAgICAgICAgIGluYm94QXJyYXkucHVzaChuYW1lKTtcbiAgICBcbiAgICAgICAgICAgIHByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKT0+IHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjbGVhckNvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhZGRJdGVtLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYWRkSXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIm5hdnlcIjtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsUHJvamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsUHJvamVjdHNbaV0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1wcm9qZWN0XCIpO1xuICAgICAgICAgICAgICAgICAgICBhbGxQcm9qZWN0c1tpXS5kaXNwbGF5ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheWVkSXRlbXMgPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHByb2plY3QuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1wcm9qZWN0XCIpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxQcm9qZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWxsUHJvamVjdHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlLXByb2plY3RcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUFycmF5ID0gYWxsUHJvamVjdEFycmF5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNob3dpbmdJdGVtcyhhY3RpdmVBcnJheSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCByZWZyZXNoUHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICByZWZyZXNoUHJvamVjdC5pbm5lclRleHQgPSBcIuKGu1wiO1xuICAgICAgICAgICAgcmVmcmVzaFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcHJvamVjdERpdi5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQocHJvamVjdCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RJdGVtLmlubmVyVGV4dCA9IGAke25hbWVbaV0udGl0bGV9IHwgJHtuYW1lW2ldLmR1ZURhdGV9YDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5jaGVja2VkID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiZ3JlZW5cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVbaV0ucHJpb3JpdHkgPT0gXCJsb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwibGlnaHRibHVlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuYW1lW2ldLnByaW9yaXR5ID09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYig1MSwgMTI2LCAyNDUpXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdEl0ZW0uc3R5bGUucGFkZGluZyA9IFwiMnB4XCI7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RJdGVtLnN0eWxlLm1hcmdpblRvcCA9IFwiM3B4XCI7XG5cbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZChwcm9qZWN0SXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJlZnJlc2hQcm9qZWN0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicmVmcmVzaC1wcm9qZWN0XCIpO1xuXG4gICAgICAgICAgICBwcm9qZWN0LmFwcGVuZENoaWxkKHJlZnJlc2hQcm9qZWN0KTtcblxuICAgICAgICAgICAgcHJvamVjdC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKTtcblxuICAgICAgICAgICAgcG9wdWxhdGVTdG9yYWdlKCk7XG5cbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBwcm9qZWN0RXhpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBwcm9qZWN0RGl2LnJlbW92ZUNoaWxkKHByb2plY3QpO1xuICAgICAgICBwcm9qZWN0cy5yZW1vdmVDaGlsZChwcm9qZWN0RGl2KTtcbiAgICB9KVxuXG4gICAgcHJvamVjdHMucmVtb3ZlQ2hpbGQobmV3UHJvamVjdEJ1dHRvbik7XG4gICAgcHJvamVjdHMuYXBwZW5kQ2hpbGQocHJvamVjdERpdik7XG4gICAgcHJvamVjdHMuYXBwZW5kQ2hpbGQobmV3UHJvamVjdEJ1dHRvbik7XG5cbiAgICBhbGxQcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuXG59IiwiaW1wb3J0IHsgSXRlbSwgZGlhbG9nIH0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCB7IGFjdGl2ZUFycmF5LCBzZXRWYWx1ZXMgfSBmcm9tIFwiLi9wcm9qZWN0cy5qc1wiO1xuaW1wb3J0IHsgc2hvd2luZ0l0ZW1zIH0gZnJvbSBcIi4vc2hvd2luZ0l0ZW1zLmpzXCI7XG5pbXBvcnQgeyBwb3B1bGF0ZVN0b3JhZ2UgfSBmcm9tIFwiLi9sb2NhbFN0b3JhZ2UuanNcIjtcblxuZXhwb3J0IGxldCBwcmlvcml0eTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRvZG9JdGVtRnVuYyAoYWN0aXZlQXJyYXkpIHtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIikudmFsdWU7XG4gICAgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xuXG4gICAgaWYgKHRpdGxlLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgYWxlcnQoXCJQbGVhc2UgSW5zZXJ0IGEgVGl0bGUuXCIpXG4gICAgfVxuXG4gICAgZWxzZSBpZiAoZGVzY3JpcHRpb24ubGVuZ3RoIDwgMSkge1xuICAgICAgICBhbGVydChcIlBsZWFzZSBJbnNlcnQgYSBEZXNjcmlwdGlvbi5cIilcbiAgICB9XG5cbiAgICBlbHNlIGlmIChkdWVEYXRlID09PSBcIlwiKSB7XG4gICAgICAgIGFsZXJ0KFwiUGxlYXNlIENob29zZSBZb3VyIER1ZSBEYXRlLlwiKVxuICAgIH1cblxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBpdGVtID0gbmV3IEl0ZW0odGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xuICAgICAgICBjb25zb2xlLmxvZyhhY3RpdmVBcnJheSk7XG4gICAgICAgIGFjdGl2ZUFycmF5LnB1c2goaXRlbSk7XG4gICAgICAgIHNob3dpbmdJdGVtcyhhY3RpdmVBcnJheSk7XG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xuICAgIH1cblxuICAgIHBvcHVsYXRlU3RvcmFnZSgpO1xuXG59IiwiaW1wb3J0IHsgcHJpb3JpdHkgfSBmcm9tIFwiLi9jcmVhdGVUb2RvSXRlbS5qc1wiO1xuaW1wb3J0IHsgc2hvd0l0ZW0sIHNob3dpbmdJdGVtcyB9IGZyb20gXCIuL3Nob3dpbmdJdGVtcy5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dGluZ1ByaW9yaXR5IChzaG93SXRlbSkge1xuICAgIFxuICAgIGlmIChwcmlvcml0eSA9PT0gXCJsb3dcIikge1xuICAgICAgICBzaG93SXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImxpZ2h0Ymx1ZVwiO1xuICAgIH1cbiAgICBcbiAgICBlbHNlIGlmIChwcmlvcml0eSA9PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgIHNob3dJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiKDUxLCAxMjYsIDI0NSlcIjtcbiAgICB9XG4gICAgXG4gICAgZWxzZSB7XG4gICAgICAgIHNob3dJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgfVxufSIsImltcG9ydCB7IHNldHRpbmdQcmlvcml0eSB9IGZyb20gXCIuL3NldHRpbmdQcmlvcml0eVwiO1xuaW1wb3J0IHsgc2hvd0l0ZW0gfSBmcm9tIFwiLi9zaG93aW5nSXRlbXNcIjtcbmltcG9ydCB7IHByaW9yaXR5IH0gZnJvbSBcIi4vY3JlYXRlVG9kb0l0ZW1cIjtcbmltcG9ydCB7IGFjdGl2ZUFycmF5IH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrQ2hlY2tib3goZXZlbnQpIHtcbiAgICBwcmlvcml0eSA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtcHJpb3JpdHlcIik7XG5cbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmVlblwiO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkRpdiBpcyBjaGVja2VkXCIpO1xuICAgICAgICBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNoZWNrZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICBsZXQgaW5kZXggPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIpO1xuICAgICAgICBhY3RpdmVBcnJheVtpbmRleF0uY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIGNvbnNvbGUubG9nKGFjdGl2ZUFycmF5W2luZGV4XS5jaGVja2VkKTtcbiAgICB9XG5cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHByaW9yaXR5ID09PSBcImxvd1wiKSB7XG4gICAgICAgICAgICBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImxpZ2h0Ymx1ZVwiO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJEaXYgaXMgbm90IGNoZWNrZWRcIik7XG4gICAgICAgICAgICBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNoZWNrZWRcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZWxzZSBpZiAocHJpb3JpdHkgPT0gXCJub3JtYWxcIikge1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZ2IoNTEsIDEyNiwgMjQ1KVwiO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJEaXYgaXMgbm90IGNoZWNrZWRcIilcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtY2hlY2tlZFwiLCBcImZhbHNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRpdiBpcyBub3QgY2hlY2tlZFwiKVxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1jaGVja2VkXCIsIFwiZmFsc2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGluZGV4ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiKTtcbiAgICAgICAgYWN0aXZlQXJyYXlbaW5kZXhdLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coYWN0aXZlQXJyYXlbaW5kZXhdLmNoZWNrZWQpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBjaGVja0NoZWNrYm94IH0gZnJvbSBcIi4vY2hlY2tDaGVja2JveC5qc1wiO1xuaW1wb3J0IHsgcHJpb3JpdHkgfSBmcm9tIFwiLi9jcmVhdGVUb2RvSXRlbS5qc1wiO1xuaW1wb3J0IHsgZWRpdFNob3dJdGVtIH0gZnJvbSBcIi4vZWRpdFNob3dJdGVtLmpzXCI7XG5pbXBvcnQgeyBhY3RpdmVBcnJheSB9IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBzZXR0aW5nUHJpb3JpdHkgfSBmcm9tIFwiLi9zZXR0aW5nUHJpb3JpdHkuanNcIjtcblxuY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbmV4cG9ydCB7IGNvbnRlbnQgfTtcbmV4cG9ydCBsZXQgc2hvd0l0ZW07XG5cbmNvbnN0IGluYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmJveFwiKTtcblxuZXhwb3J0IGxldCBkaXNwbGF5ZWRJdGVtcyA9IDA7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93aW5nSXRlbXMoYWN0aXZlQXJyYXkpIHtcblxuICAgIGZvciAobGV0IGkgPSBkaXNwbGF5ZWRJdGVtczsgaSA8IGFjdGl2ZUFycmF5Lmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgc2hvd0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgY2hlY2tib3gudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICAgICAgY2hlY2tib3guY2xhc3NMaXN0LmFkZChcImNoZWNrYm94XCIpO1xuICAgICAgICBjb25zdCBzaG93VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb25zdCBzaG93RGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb25zdCBzaG93RHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNob3dUaXRsZS5pbm5lckhUTUwgPVwiPGgzPlwiICsgYWN0aXZlQXJyYXlbaV0udGl0bGUgKyBcIjwvaDM+XCI7XG4gICAgICAgIHNob3dEZXNjcmlwdGlvbi5pbm5lckhUTUwgPVwiPHA+XCIgKyBhY3RpdmVBcnJheVtpXS5kZXNjcmlwdGlvbiArIFwiPC9wPlwiO1xuICAgICAgICBzaG93RHVlRGF0ZS5pbm5lckhUTUwgPVwiPHA+XCIgKyBhY3RpdmVBcnJheVtpXS5kdWVEYXRlICsgXCI8L3A+XCI7XG4gICAgXG4gICAgICAgIHByaW9yaXR5ID0gYWN0aXZlQXJyYXlbaV0ucHJpb3JpdHk7XG5cbiAgICAgICAgc2V0dGluZ1ByaW9yaXR5KHNob3dJdGVtKTtcbiAgICBcbiAgICAgICAgc2hvd0l0ZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1wcmlvcml0eVwiLCBwcmlvcml0eSk7XG4gICAgICAgIHNob3dJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIiwgaSk7XG4gICAgICAgIHNob3dJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtY2hlY2tlZFwiLCBcImZhbHNlXCIpO1xuICAgICAgICBzaG93SXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWVkaXRpbmdcIiwgXCJmYWxzZVwiKTtcblxuICAgICAgICBpZiAoYWN0aXZlQXJyYXlbaV0uY2hlY2tlZCA9PSB0cnVlKSB7XG4gICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHNob3dJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtY2hlY2tlZFwiLCBcInRydWVcIik7XG4gICAgICAgICAgICBzaG93SXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImdyZWVuXCI7XG4gICAgICAgIH1cblxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHNob3dJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtY2hlY2tlZFwiLCBcImZhbHNlXCIpO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICAgICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQoc2hvd1RpdGxlKTtcbiAgICAgICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQoc2hvd0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQoc2hvd0R1ZURhdGUpO1xuICAgICAgICBzaG93SXRlbS5jbGFzc0xpc3QuYWRkKFwic2hvd0l0ZW1EaXZcIik7XG4gICAgICAgIHNob3dEZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwic2hvd0Rlc2NyaXB0aW9uXCIpO1xuICAgIFxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKHNob3dJdGVtKTtcbiAgICBcbiAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0NoZWNrYm94KTtcbiAgICBcbiAgICAgICAgc2hvd0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgPT0gc2hvd0l0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoc2hvd0l0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1jaGVja2VkXCIpID09IFwiZmFsc2VcIiAmJiBzaG93SXRlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWVkaXRpbmdcIikgPT0gXCJmYWxzZVwiICYmIGluYm94LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZS1wcm9qZWN0XCIpID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRTaG93SXRlbShlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhY3RpdmVBcnJheVtpXS5kaXNwbGF5ZWQgPSB0cnVlO1xuICAgICAgICBkaXNwbGF5ZWRJdGVtcysrO1xuICAgIFxuICAgIH1cbiAgICBcbn0iLCJpbXBvcnQgeyBzaG93aW5nSXRlbXMgfSBmcm9tIFwiLi9zaG93aW5nSXRlbXMuanNcIjtcbmltcG9ydCB7IGNyZWF0ZVRvZG9JdGVtRnVuYyB9IGZyb20gIFwiLi9jcmVhdGVUb2RvSXRlbS5qc1wiO1xuaW1wb3J0IHsgY2xlYXJDb250ZW50IH0gZnJvbSBcIi4vY2xlYXJDb250ZW50LmpzXCI7XG5pbXBvcnQgeyBhY3RpdmVBcnJheSwgY3JlYXRlTmV3UHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RzLmpzXCI7XG5pbXBvcnQgeyBwb3B1bGF0ZVN0b3JhZ2UsIGdldFZhbHVlcyB9IGZyb20gXCIuL2xvY2FsU3RvcmFnZS5qc1wiO1xuXG5jb25zdCBkaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpYWxvZ1wiKVswXTtcbmV4cG9ydCB7IGRpYWxvZyB9O1xuZXhwb3J0IGNvbnN0IGFkZEl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZEl0ZW1cIik7XG5hZGRJdGVtLmRpc2FibGVkID0gdHJ1ZTtcblxuaWYgKGFkZEl0ZW0uZGlzYWJsZWQgPT0gdHJ1ZSkge1xuICAgIGFkZEl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmV5XCI7XG59XG5cbmVsc2Uge1xuICAgIGFkZEl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJuYXZ5XCI7XG59XG5cbmNvbnN0IGNsb3NlRGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZURpYWxvZ1wiKTtcblxuY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZm9ybVwiKVswXTtcblxuYWRkSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4ge1xuICAgIGRpYWxvZy5zaG93TW9kYWwoKTtcbiAgICBmb3JtLnJlc2V0KCk7XG59KTtcblxuY2xvc2VEaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHtcbiAgICBkaWFsb2cuY2xvc2UoKTtcbn0pO1xuXG5leHBvcnQgY2xhc3MgSXRlbSB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIH07XG59XG5cbmNvbnN0IGNyZWF0ZVRvZG9JdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjcmVhdGVUb2RvSXRlbVwiKTtcblxuY3JlYXRlVG9kb0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY3JlYXRlVG9kb0l0ZW1GdW5jKGFjdGl2ZUFycmF5KTtcbn0pO1xuXG5leHBvcnQgY29uc3QgbmV3UHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UHJvamVjdFwiKTtcbmV4cG9ydCBjb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdHNcIik7XG5cbm5ld1Byb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZU5ld1Byb2plY3QpO1xuXG5jb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuXG5leHBvcnQgY29uc3QgaW5mb3JtYXRpb25hbFAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbmluZm9ybWF0aW9uYWxQLmlubmVySFRNTCA9IFwiVGhlIGluYm94IHNlY3Rpb24gaXMgZm9yIDxiPnJldmlldyBvbmx5PC9iPi4gWW91IGNhbid0IGNyZWF0ZSwgZWRpdCBvciBjaGVjayB0b2RvIGl0ZW1zIGhlcmUuIFlvdSBuZWVkIHRvIGNyZWF0ZSBzZXBhcmF0ZSBwcm9qZWN0IGZvciB0aGF0LlwiO1xuaW5mb3JtYXRpb25hbFAuc3R5bGUuZm9udFN0eWxlID0gXCJpdGFsaWNcIjtcbmluZm9ybWF0aW9uYWxQLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuaW5mb3JtYXRpb25hbFAuc3R5bGUuYm90dG9tID0gXCI1cHhcIjtcbmNvbnRlbnQuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5jb250ZW50LmFwcGVuZENoaWxkKGluZm9ybWF0aW9uYWxQKTtcblxuaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiaW5ib3hBcnJheVwiKSA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUubG9nKFwiVGhlcmUgaXMgbm8gc3VjaCB0aGlzIGFzICdpbmJveEFycmF5JyBpbnNpZGUgbG9jYWxTdG9yYWdlLiBJIHdpbGwgcG9wdWxhdGUgaXQgbm93Li4uXCIpXG4gICAgcG9wdWxhdGVTdG9yYWdlKCk7XG59XG5cbmVsc2Uge1xuICAgIGdldFZhbHVlcygpO1xufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNsZWFyQ29udGVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJlZGl0U2hvd0l0ZW0iLCJzaG93SXRlbSIsInNldEF0dHJpYnV0ZSIsImNvbnNvbGUiLCJsb2ciLCJpbnB1dFRpdGxlIiwiY3JlYXRlRWxlbWVudCIsImlucHV0RGVzY3JpcHRpb24iLCJpbnB1dER1ZURhdGUiLCJpbnB1dFByaW9yaXR5Iiwib3B0aW9uTG93Iiwib3B0aW9uTm9ybWFsIiwib3B0aW9uSGlnaCIsImlubmVyVGV4dCIsImNoaWxkcmVuIiwiY2hlY2tib3giLCJpdGVtIiwib3JpZ2luYWxUaXRsZSIsIm9yaWdpbmFsRGVzY3JpcHRpb24iLCJvcmlnaW5hbER1ZURhdGUiLCJvcmlnaW5hbFByaW9yaXR5IiwiZ2V0QXR0cmlidXRlIiwiZGlzYWJsZWQiLCJ2YWx1ZSIsImFwcGVuZENoaWxkIiwic2VsZWN0ZWQiLCJ0eXBlIiwicmVtb3ZlQ2hpbGQiLCJzYXZlQnV0dG9uIiwiY2xvc2VCdXR0b24iLCJkZWxldGVCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiaW5kZXgiLCJwYXJzZUludCIsImFjdGl2ZUFycmF5IiwicG9wIiwibmV3VGl0bGUiLCJuZXdEZXNjcmlwdGlvbiIsIm5ld0R1ZURhdGUiLCJzdHlsZSIsImZvbnRTdHlsZSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJzZXR0aW5nUHJpb3JpdHkiLCJwb3B1bGF0ZVN0b3JhZ2UiLCJzdHJpbmdpZmllZEluYm94QXJyYXkiLCJKU09OIiwic3RyaW5naWZ5IiwiaW5ib3hBcnJheSIsInN0cmluZ2lmaWVkQWxsUHJvamVjdHMiLCJhbGxQcm9qZWN0cyIsInN0cmluZ2lmaWVkQWxsUHJvamVjdEFycmF5cyIsImFsbFByb2plY3RBcnJheXMiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiaW5ib3giLCJwdXNoIiwiY29udGVudCIsImJhY2tncm91bmRDb2xvciIsImNoZWNrQ2hlY2tib3giLCJldmVudCIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJjaGVja2VkIiwiYWRkSXRlbSIsImkiLCJsZW5ndGgiLCJyZW1vdmUiLCJkaXNwbGF5ZWQiLCJkaXNwbGF5ZWRJdGVtcyIsImNvbnRhaW5zIiwiaiIsInNob3dpbmdJdGVtcyIsImluZm9ybWF0aW9uYWxQIiwiY2hpbGQiLCJmaXJzdENoaWxkIiwic2hvd1RpdGxlIiwic2hvd0Rlc2NyaXB0aW9uIiwic2hvd0R1ZURhdGUiLCJlIiwiZGlhbG9nIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjbG9zZURpYWxvZyIsInNob3dNb2RhbCIsInJlc2V0IiwiY2xvc2UiLCJJdGVtIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiYWxlcnQiLCJjcmVhdGVUb2RvSXRlbUZ1bmMiLCJuZXdQcm9qZWN0QnV0dG9uIiwicHJvamVjdHMiLCJwcm9qZWN0RGl2IiwicHJvamVjdCIsInByb2plY3ROYW1lSW5wdXQiLCJwcm9qZWN0U2F2ZSIsInByb2plY3RFeGl0IiwicGFkZGluZyIsIm1heEhlaWdodCIsIm1heFdpZHRoIiwiZm9udFNpemUiLCJjb2xvciIsIm1hcmdpblRvcCIsIm5hbWUiLCJBcnJheSIsInJlZnJlc2hQcm9qZWN0IiwicHJvamVjdEl0ZW0iLCJwb3NpdGlvbiIsImJvdHRvbSIsImdldEl0ZW0iLCJzYXZlZEluYm94QXJyYXkiLCJzYXZlZEFsbFByb2plY3RBcnJheXMiLCJzYXZlZEFsbFByb2plY3RzIiwicGFyc2UiLCJnZXRWYWx1ZXMiXSwic291cmNlUm9vdCI6IiJ9