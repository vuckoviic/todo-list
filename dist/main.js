(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){document.getElementById("content").innerHTML=""}e.d({},{q7:()=>b,r3:()=>g,ar:()=>C,dt:()=>k});const n=document.getElementById("inbox");let i=[],d=[];d.push(n);let l,a,o=[];function r(e){e.style.backgroundColor="low"===a?"lightblue":"normal"==a?"rgb(51, 126, 245)":"red"}function c(e){if(a=e.target.parentElement.getAttribute("data-priority"),!0===e.target.checked){e.target.parentElement.style.backgroundColor="green",console.log("Div is checked"),e.target.parentElement.setAttribute("data-checked","true");let t=e.target.parentElement.getAttribute("data-index");l[t].checked=!0,console.log(l[t].checked)}else{"low"===a?(e.target.parentElement.style.backgroundColor="lightblue",console.log("Div is not checked"),e.target.parentElement.setAttribute("data-checked","false")):"normal"==a?(e.target.parentElement.style.backgroundColor="rgb(51, 126, 245)",console.log("Div is not checked"),e.target.parentElement.setAttribute("data-checked","false")):(e.target.parentElement.style.backgroundColor="red",console.log("Div is not checked"),e.target.parentElement.setAttribute("data-checked","false"));let t=e.target.parentElement.getAttribute("data-index");l[t].checked=!1,console.log(l[t].checked)}}function s(e){e.setAttribute("data-editing","true"),console.log("Div IS being edited right now");const t=document.createElement("input"),n=document.createElement("textarea"),i=document.createElement("input"),d=document.createElement("select"),o=document.createElement("option"),c=document.createElement("option"),s=document.createElement("option");o.innerText="Low",c.innerText="Normal",s.innerText="High",o.setAttribute("value","low"),c.setAttribute("value","normal"),s.setAttribute("value","high");const u=e.children,p=u.item(0),h=u.item(1).innerText,g=u.item(2).innerText,v=u.item(3).innerText,E=e.getAttribute("data-priority");p.disabled=!0,t.value=h,n.innerText=g,i.value=v,d.innerText=E,d.appendChild(o),d.appendChild(c),d.appendChild(s),"low"==E?o.selected=!0:"normal"==E?c.selected=!0:"high"==E&&(s.selected=!0),i.type="date",e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(d),e.removeChild(u.item(1)),e.removeChild(u.item(1)),e.removeChild(u.item(1));const y=document.createElement("button"),b=document.createElement("button"),C=document.createElement("button");y.classList.add("editButton","saveEditButton"),b.classList.add("editButton","closeEditButton"),C.classList.add("editButton","deleteEditButton"),y.innerText="Save",b.innerText="Close",C.innerText="Delete",e.appendChild(C),e.appendChild(b),e.appendChild(y),C.addEventListener("click",(()=>{m.removeChild(e);const t=parseInt(e.getAttribute("data-index"));l.pop(l[t]),e.setAttribute("data-editing","false"),console.log("Div IS NOT being edited right now.")})),b.addEventListener("click",(()=>{const l=document.createElement("h3"),a=document.createElement("p"),o=document.createElement("p");e.setAttribute("data-priority",E),l.innerText=h,a.innerText=g,a.style.fontStyle="italic",o.innerText=v,e.appendChild(l),e.appendChild(a),e.appendChild(o),e.removeChild(t),e.removeChild(n),e.removeChild(i),e.removeChild(d),e.removeChild(y),e.removeChild(b),e.removeChild(C),p.disabled=!1,e.setAttribute("data-editing","false"),console.log("Div IS NOT being edited right now.")})),y.addEventListener("click",(()=>{const o=document.createElement("h3"),c=document.createElement("p"),s=document.createElement("p");o.innerText=t.value,c.innerText=n.value,c.style.fontStyle="italic",s.innerText=i.value;const m=parseInt(e.getAttribute("data-index"));l[m].title=t.value,l[m].description=n.value,l[m].dueDate=i.value,l[m].priority=d.value,a=d.value,r(e),e.setAttribute("data-priority",d.value),console.log(l[m]),console.log("Saved item's priority is: "+l[m].priority),e.appendChild(o),e.appendChild(c),e.appendChild(s),e.removeChild(t),e.removeChild(n),e.removeChild(i),e.removeChild(d),e.removeChild(y),e.removeChild(b),e.removeChild(C),p.disabled=!1,e.setAttribute("data-editing","false"),console.log("Div IS NOT being edited right now.")}))}o.push(i),l=i,n.classList.add("active-project"),n.addEventListener("click",(()=>{t();for(let e=0;e<d.length;e++)d[e].classList.remove("active-project"),d[e].displayed=!1,p=0;n.classList.add("active-project");for(let e=0;e<d.length;e++)d[e].classList.contains("active-project")&&(l=o[e]);h(l)}));const m=document.getElementById("content");let u,p=0;function h(e){for(let t=p;t<e.length;t++){u=document.createElement("div");const n=document.createElement("input");n.type="checkbox",n.classList.add("checkbox");const i=document.createElement("div"),d=document.createElement("div"),l=document.createElement("div");i.innerHTML="<h3>"+e[t].title+"</h3>",d.innerHTML="<p>"+e[t].description+"</p>",l.innerHTML="<p>"+e[t].dueDate+"</p>",a=e[t].priority,r(u),u.setAttribute("data-priority",a),u.setAttribute("data-index",t),u.setAttribute("data-checked","false"),u.setAttribute("data-editing","false"),1==e[t].checked?(n.checked=!0,u.setAttribute("data-checked","true"),u.style.backgroundColor="green"):(n.checked=!1,u.setAttribute("data-checked","false")),u.appendChild(n),u.appendChild(i),u.appendChild(d),u.appendChild(l),u.classList.add("showItemDiv"),d.classList.add("showDescription"),m.appendChild(u),n.addEventListener("click",c),u.addEventListener("click",(e=>{e.target==u&&"false"==u.getAttribute("data-checked")&&"false"==u.getAttribute("data-editing")&&s(e.target)})),e[t].displayed=!0,p++}}const g=document.getElementsByTagName("dialog")[0],v=document.getElementById("addItem"),E=document.getElementById("closeDialog"),y=document.getElementsByTagName("form")[0];v.addEventListener("click",(()=>{g.showModal(),y.reset()})),E.addEventListener("click",(()=>{g.close()}));class b{constructor(e,t,n,i){this.title=e,this.description=t,this.dueDate=n,this.priority=i}}document.getElementById("createTodoItem").addEventListener("click",(()=>{!function(e){const t=document.getElementById("title").value,n=document.getElementById("description").value,i=document.getElementById("dueDate").value;if(a=document.getElementById("priority").value,t.length<1)alert("Please Insert a Title.");else if(n.length<1)alert("Please Insert a Description.");else if(""===i)alert("Please Choose Your Due Date.");else{const d=new b(t,n,i,a);console.log(d),console.log(e),e.push(d),h(e),g.close()}}(l)}));const C=document.getElementById("newProject"),k=document.getElementById("projects");C.addEventListener("click",(function(){const e=document.createElement("button"),n=document.createElement("input"),i=document.createElement("button"),a=document.createElement("button");i.innerText="Save",a.innerText="Exit",e.style.padding="3px",i.style.backgroundColor="white",i.style.maxHeight="15px",i.style.maxWidth="15px",i.style.fontSize="1em",i.style.color="navy",i.style.marginTop="5px",a.style.backgroundColor="white",a.style.maxHeight="15px",a.style.maxWidth="15px",a.style.fontSize="1em",a.style.color="navy",a.style.marginTop="5px",e.appendChild(n),e.appendChild(a),e.appendChild(i),i.addEventListener("click",(()=>{let i=n.value;i.length<1?alert("Please Insert Name For Your Project."):(e.innerText=i,i=new Array,o.push(i),e.addEventListener("click",(()=>{t();for(let e=0;e<d.length;e++)d[e].classList.remove("active-project"),d[e].displayed=!1,p=0;e.classList.add("active-project");for(let e=0;e<d.length;e++)d[e].classList.contains("active-project")&&(l=o[e]);h(l)})))})),a.addEventListener("click",(()=>{k.removeChild(e)})),k.removeChild(C),k.appendChild(e),k.appendChild(C),d.push(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBR3JCcUIsRUFBUXRDLFVBQVVDLElBQUksa0JBRXRCLElBQUssSUFBSVksRUFBSSxFQUFHQSxFQUFJMUQsRUFBWTJELE9BQVFELElBQ2hDMUQsRUFBWTBELEdBQUdiLFVBQVVrQixTQUFTLG9CQUNsQzdELEVBQWNFLEVBQWlCc0QsSUFJdkNNLEVBQWE5RCxFQUFZLElBR2pDLElBSUpvRixFQUFZdkMsaUJBQWlCLFNBQVMsS0FDbENtQyxFQUFTekMsWUFBWTBDLEVBQVEsSUFHakNELEVBQVN6QyxZQUFZd0MsR0FDckJDLEVBQVM1QyxZQUFZNkMsR0FDckJELEVBQVM1QyxZQUFZMkMsR0FFckJqRixFQUFZQyxLQUFLa0YsRUFFckIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9jbGVhckNvbnRlbnQuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3RzLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9jcmVhdGVUb2RvSXRlbS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc2V0dGluZ1ByaW9yaXR5LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9jaGVja0NoZWNrYm94LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9lZGl0U2hvd0l0ZW0uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Nob3dpbmdJdGVtcy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJleHBvcnQgZnVuY3Rpb24gY2xlYXJDb250ZW50KCkge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG4gICAgY29udGVudC5pbm5lckhUTUwgPSBcIlwiO1xufSIsImltcG9ydCB7IHByb2plY3RzLCBuZXdQcm9qZWN0QnV0dG9uIH0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCB7IGNsZWFyQ29udGVudCB9IGZyb20gXCIuL2NsZWFyQ29udGVudC5qc1wiO1xuaW1wb3J0IHsgZGlzcGxheWVkSXRlbXMsIHNob3dpbmdJdGVtcyB9IGZyb20gXCIuL3Nob3dpbmdJdGVtcy5qc1wiO1xuXG5jb25zdCBpbmJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5ib3hcIik7XG5sZXQgaW5ib3hBcnJheSA9IFtdO1xuXG5sZXQgYWxsUHJvamVjdHMgPSBbXTtcbmFsbFByb2plY3RzLnB1c2goaW5ib3gpO1xuXG5sZXQgYWxsUHJvamVjdEFycmF5cyA9IFtdO1xuYWxsUHJvamVjdEFycmF5cy5wdXNoKGluYm94QXJyYXkpO1xuZXhwb3J0IGxldCBhY3RpdmVBcnJheTtcblxuYWN0aXZlQXJyYXkgPSBpbmJveEFycmF5O1xuXG5pbmJveC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLXByb2plY3RcIik7XG5pbmJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PiB7XG4gICAgICAgICAgICAgICAgXG4gICAgY2xlYXJDb250ZW50KCk7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxQcm9qZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhbGxQcm9qZWN0c1tpXS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLXByb2plY3RcIik7XG4gICAgICAgIGFsbFByb2plY3RzW2ldLmRpc3BsYXllZCA9IGZhbHNlO1xuICAgICAgICBkaXNwbGF5ZWRJdGVtcyA9IDA7XG4gICAgfVxuXG4gICAgaW5ib3guY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1wcm9qZWN0XCIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxQcm9qZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYWxsUHJvamVjdHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlLXByb2plY3RcIikpIHtcbiAgICAgICAgICAgIGFjdGl2ZUFycmF5ID0gYWxsUHJvamVjdEFycmF5c1tpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNob3dpbmdJdGVtcyhhY3RpdmVBcnJheSk7XG5cbn0pO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOZXdQcm9qZWN0KCkge1xuXG4gICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY29uc3QgcHJvamVjdE5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBjb25zdCBwcm9qZWN0U2F2ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY29uc3QgcHJvamVjdEV4aXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIFxuICAgIHByb2plY3RTYXZlLmlubmVyVGV4dCA9IFwiU2F2ZVwiO1xuICAgIHByb2plY3RFeGl0LmlubmVyVGV4dCA9IFwiRXhpdFwiO1xuXG4gICAgcHJvamVjdC5zdHlsZS5wYWRkaW5nID0gXCIzcHhcIjtcblxuICAgIHByb2plY3RTYXZlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbiAgICBwcm9qZWN0U2F2ZS5zdHlsZS5tYXhIZWlnaHQgPSBcIjE1cHhcIjtcbiAgICBwcm9qZWN0U2F2ZS5zdHlsZS5tYXhXaWR0aCA9IFwiMTVweFwiO1xuICAgIHByb2plY3RTYXZlLnN0eWxlLmZvbnRTaXplID0gXCIxZW1cIjtcbiAgICBwcm9qZWN0U2F2ZS5zdHlsZS5jb2xvciA9IFwibmF2eVwiO1xuICAgIHByb2plY3RTYXZlLnN0eWxlLm1hcmdpblRvcCA9IFwiNXB4XCI7XG5cbiAgICBwcm9qZWN0RXhpdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG4gICAgcHJvamVjdEV4aXQuc3R5bGUubWF4SGVpZ2h0ID0gXCIxNXB4XCI7XG4gICAgcHJvamVjdEV4aXQuc3R5bGUubWF4V2lkdGggPSBcIjE1cHhcIjtcbiAgICBwcm9qZWN0RXhpdC5zdHlsZS5mb250U2l6ZSA9IFwiMWVtXCI7XG4gICAgcHJvamVjdEV4aXQuc3R5bGUuY29sb3IgPSBcIm5hdnlcIjtcbiAgICBwcm9qZWN0RXhpdC5zdHlsZS5tYXJnaW5Ub3AgPSBcIjVweFwiO1xuXG4gICAgcHJvamVjdC5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZUlucHV0KTtcbiAgICBwcm9qZWN0LmFwcGVuZENoaWxkKHByb2plY3RFeGl0KTtcbiAgICBwcm9qZWN0LmFwcGVuZENoaWxkKHByb2plY3RTYXZlKTtcblxuICAgIHByb2plY3RTYXZlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIFxuICAgICAgICBsZXQgbmFtZSA9IHByb2plY3ROYW1lSW5wdXQudmFsdWU7XG4gICAgICAgIFxuICAgICAgICBpZiAobmFtZS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICBhbGVydChcIlBsZWFzZSBJbnNlcnQgTmFtZSBGb3IgWW91ciBQcm9qZWN0LlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJvamVjdC5pbm5lclRleHQgPSBuYW1lO1xuICAgICAgICAgICAgbmFtZSA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgYWxsUHJvamVjdEFycmF5cy5wdXNoKG5hbWUpO1xuICAgIFxuICAgICAgICAgICAgcHJvamVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PiB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2xlYXJDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxQcm9qZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBhbGxQcm9qZWN0c1tpXS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLXByb2plY3RcIik7XG4gICAgICAgICAgICAgICAgICAgIGFsbFByb2plY3RzW2ldLmRpc3BsYXllZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5ZWRJdGVtcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcHJvamVjdC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLXByb2plY3RcIik7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFByb2plY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGxQcm9qZWN0c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmUtcHJvamVjdFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQXJyYXkgPSBhbGxQcm9qZWN0QXJyYXlzW2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2hvd2luZ0l0ZW1zKGFjdGl2ZUFycmF5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgcHJvamVjdEV4aXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgcHJvamVjdHMucmVtb3ZlQ2hpbGQocHJvamVjdCk7XG4gICAgfSlcblxuICAgIHByb2plY3RzLnJlbW92ZUNoaWxkKG5ld1Byb2plY3RCdXR0b24pO1xuICAgIHByb2plY3RzLmFwcGVuZENoaWxkKHByb2plY3QpO1xuICAgIHByb2plY3RzLmFwcGVuZENoaWxkKG5ld1Byb2plY3RCdXR0b24pO1xuXG4gICAgYWxsUHJvamVjdHMucHVzaChwcm9qZWN0KTtcblxufSIsImltcG9ydCB7IEl0ZW0sIGRpYWxvZyB9IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBhY3RpdmVBcnJheSB9IGZyb20gXCIuL3Byb2plY3RzLmpzXCI7XG5pbXBvcnQgeyBzaG93aW5nSXRlbXMgfSBmcm9tIFwiLi9zaG93aW5nSXRlbXMuanNcIjtcblxuZXhwb3J0IGxldCBwcmlvcml0eTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRvZG9JdGVtRnVuYyAoYWN0aXZlQXJyYXkpIHtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIikudmFsdWU7XG4gICAgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xuXG4gICAgaWYgKHRpdGxlLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgYWxlcnQoXCJQbGVhc2UgSW5zZXJ0IGEgVGl0bGUuXCIpXG4gICAgfVxuXG4gICAgZWxzZSBpZiAoZGVzY3JpcHRpb24ubGVuZ3RoIDwgMSkge1xuICAgICAgICBhbGVydChcIlBsZWFzZSBJbnNlcnQgYSBEZXNjcmlwdGlvbi5cIilcbiAgICB9XG5cbiAgICBlbHNlIGlmIChkdWVEYXRlID09PSBcIlwiKSB7XG4gICAgICAgIGFsZXJ0KFwiUGxlYXNlIENob29zZSBZb3VyIER1ZSBEYXRlLlwiKVxuICAgIH1cblxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBpdGVtID0gbmV3IEl0ZW0odGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xuICAgICAgICBjb25zb2xlLmxvZyhhY3RpdmVBcnJheSk7XG4gICAgICAgIGFjdGl2ZUFycmF5LnB1c2goaXRlbSk7XG4gICAgICAgIHNob3dpbmdJdGVtcyhhY3RpdmVBcnJheSk7XG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xuICAgIH1cblxuXG59IiwiaW1wb3J0IHsgcHJpb3JpdHkgfSBmcm9tIFwiLi9jcmVhdGVUb2RvSXRlbS5qc1wiO1xuaW1wb3J0IHsgc2hvd0l0ZW0sIHNob3dpbmdJdGVtcyB9IGZyb20gXCIuL3Nob3dpbmdJdGVtcy5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dGluZ1ByaW9yaXR5IChzaG93SXRlbSkge1xuICAgIFxuICAgIGlmIChwcmlvcml0eSA9PT0gXCJsb3dcIikge1xuICAgICAgICBzaG93SXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImxpZ2h0Ymx1ZVwiO1xuICAgIH1cbiAgICBcbiAgICBlbHNlIGlmIChwcmlvcml0eSA9PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgIHNob3dJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiKDUxLCAxMjYsIDI0NSlcIjtcbiAgICB9XG4gICAgXG4gICAgZWxzZSB7XG4gICAgICAgIHNob3dJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgfVxufSIsImltcG9ydCB7IHNldHRpbmdQcmlvcml0eSB9IGZyb20gXCIuL3NldHRpbmdQcmlvcml0eVwiO1xuaW1wb3J0IHsgc2hvd0l0ZW0gfSBmcm9tIFwiLi9zaG93aW5nSXRlbXNcIjtcbmltcG9ydCB7IHByaW9yaXR5IH0gZnJvbSBcIi4vY3JlYXRlVG9kb0l0ZW1cIjtcbmltcG9ydCB7IGFjdGl2ZUFycmF5IH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrQ2hlY2tib3goZXZlbnQpIHtcbiAgICBwcmlvcml0eSA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtcHJpb3JpdHlcIik7XG5cbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmVlblwiO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkRpdiBpcyBjaGVja2VkXCIpO1xuICAgICAgICBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNoZWNrZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICBsZXQgaW5kZXggPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIpO1xuICAgICAgICBhY3RpdmVBcnJheVtpbmRleF0uY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIGNvbnNvbGUubG9nKGFjdGl2ZUFycmF5W2luZGV4XS5jaGVja2VkKTtcbiAgICB9XG5cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHByaW9yaXR5ID09PSBcImxvd1wiKSB7XG4gICAgICAgICAgICBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImxpZ2h0Ymx1ZVwiO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJEaXYgaXMgbm90IGNoZWNrZWRcIik7XG4gICAgICAgICAgICBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNoZWNrZWRcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZWxzZSBpZiAocHJpb3JpdHkgPT0gXCJub3JtYWxcIikge1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZ2IoNTEsIDEyNiwgMjQ1KVwiO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJEaXYgaXMgbm90IGNoZWNrZWRcIilcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtY2hlY2tlZFwiLCBcImZhbHNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRpdiBpcyBub3QgY2hlY2tlZFwiKVxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1jaGVja2VkXCIsIFwiZmFsc2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGluZGV4ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiKTtcbiAgICAgICAgYWN0aXZlQXJyYXlbaW5kZXhdLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coYWN0aXZlQXJyYXlbaW5kZXhdLmNoZWNrZWQpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBhY3RpdmVBcnJheSB9IGZyb20gXCIuL3Byb2plY3RzLmpzXCI7XG5pbXBvcnQgeyBzZXR0aW5nUHJpb3JpdHkgfSBmcm9tIFwiLi9zZXR0aW5nUHJpb3JpdHlcIjtcbmltcG9ydCB7IHNob3dJdGVtIH0gZnJvbSBcIi4vc2hvd2luZ0l0ZW1zXCI7XG5pbXBvcnQgeyBjb250ZW50IH0gZnJvbSBcIi4vc2hvd2luZ0l0ZW1zXCI7XG5pbXBvcnQgeyBwcmlvcml0eSB9IGZyb20gXCIuL2NyZWF0ZVRvZG9JdGVtXCI7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGVkaXRTaG93SXRlbShzaG93SXRlbSkge1xuXG4gICAgc2hvd0l0ZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1lZGl0aW5nXCIsIFwidHJ1ZVwiKTtcbiAgICBjb25zb2xlLmxvZyhcIkRpdiBJUyBiZWluZyBlZGl0ZWQgcmlnaHQgbm93XCIpO1xuXG4gICAgY29uc3QgaW5wdXRUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBjb25zdCBpbnB1dERlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgIGNvbnN0IGlucHV0RHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBjb25zdCBpbnB1dFByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcblxuICAgIGNvbnN0IG9wdGlvbkxvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgY29uc3Qgb3B0aW9uTm9ybWFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICBjb25zdCBvcHRpb25IaWdoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcblxuICAgIG9wdGlvbkxvdy5pbm5lclRleHQgPSBcIkxvd1wiO1xuICAgIG9wdGlvbk5vcm1hbC5pbm5lclRleHQgPSBcIk5vcm1hbFwiO1xuICAgIG9wdGlvbkhpZ2guaW5uZXJUZXh0ID0gXCJIaWdoXCI7XG5cbiAgICBvcHRpb25Mb3cuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJsb3dcIik7IFxuICAgIG9wdGlvbk5vcm1hbC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBcIm5vcm1hbFwiKTtcbiAgICBvcHRpb25IaWdoLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiaGlnaFwiKTtcblxuXG4gICAgY29uc3QgY2hpbGRyZW4gPSBzaG93SXRlbS5jaGlsZHJlbjtcbiAgICBjb25zdCBjaGVja2JveCA9IGNoaWxkcmVuLml0ZW0oMCk7XG4gICAgY29uc3Qgb3JpZ2luYWxUaXRsZSA9IGNoaWxkcmVuLml0ZW0oMSkuaW5uZXJUZXh0O1xuICAgIGNvbnN0IG9yaWdpbmFsRGVzY3JpcHRpb24gPSBjaGlsZHJlbi5pdGVtKDIpLmlubmVyVGV4dDtcbiAgICBjb25zdCBvcmlnaW5hbER1ZURhdGUgPSBjaGlsZHJlbi5pdGVtKDMpLmlubmVyVGV4dDtcbiAgICBjb25zdCBvcmlnaW5hbFByaW9yaXR5ID0gc2hvd0l0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1wcmlvcml0eVwiKTtcblxuICAgIGNoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcblxuICAgIGlucHV0VGl0bGUudmFsdWUgPSBvcmlnaW5hbFRpdGxlO1xuICAgIGlucHV0RGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gb3JpZ2luYWxEZXNjcmlwdGlvbjtcbiAgICBpbnB1dER1ZURhdGUudmFsdWUgPSBvcmlnaW5hbER1ZURhdGU7XG4gICAgaW5wdXRQcmlvcml0eS5pbm5lclRleHQgPSBvcmlnaW5hbFByaW9yaXR5O1xuXG4gICAgaW5wdXRQcmlvcml0eS5hcHBlbmRDaGlsZChvcHRpb25Mb3cpO1xuICAgIGlucHV0UHJpb3JpdHkuYXBwZW5kQ2hpbGQob3B0aW9uTm9ybWFsKTtcbiAgICBpbnB1dFByaW9yaXR5LmFwcGVuZENoaWxkKG9wdGlvbkhpZ2gpO1xuICAgIFxuICAgIGlmIChvcmlnaW5hbFByaW9yaXR5ID09IFwibG93XCIpIHtcbiAgICAgICAgb3B0aW9uTG93LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgZWxzZSBpZiAob3JpZ2luYWxQcmlvcml0eSA9PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgIG9wdGlvbk5vcm1hbC5zZWxlY3RlZCA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIGVsc2UgaWYgKG9yaWdpbmFsUHJpb3JpdHkgPT0gXCJoaWdoXCIpIHtcbiAgICAgICAgb3B0aW9uSGlnaC5zZWxlY3RlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaW5wdXREdWVEYXRlLnR5cGUgPSBcImRhdGVcIjtcbiAgICBcbiAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChpbnB1dFRpdGxlKTtcbiAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChpbnB1dERlc2NyaXB0aW9uKTtcbiAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChpbnB1dER1ZURhdGUpO1xuICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKGlucHV0UHJpb3JpdHkpO1xuXG5cbiAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChjaGlsZHJlbi5pdGVtKDEpKTtcbiAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChjaGlsZHJlbi5pdGVtKDEpKTtcbiAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChjaGlsZHJlbi5pdGVtKDEpKTtcblxuICAgIGNvbnN0IHNhdmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBjb25zdCBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXG4gICAgc2F2ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZWRpdEJ1dHRvblwiLCBcInNhdmVFZGl0QnV0dG9uXCIpO1xuICAgIGNsb3NlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJlZGl0QnV0dG9uXCIsIFwiY2xvc2VFZGl0QnV0dG9uXCIpO1xuICAgIGRlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZWRpdEJ1dHRvblwiLCBcImRlbGV0ZUVkaXRCdXR0b25cIik7XG5cbiAgICBzYXZlQnV0dG9uLmlubmVyVGV4dCA9IFwiU2F2ZVwiO1xuICAgIGNsb3NlQnV0dG9uLmlubmVyVGV4dCA9IFwiQ2xvc2VcIjtcbiAgICBkZWxldGVCdXR0b24uaW5uZXJUZXh0ID0gXCJEZWxldGVcIjtcblxuICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbik7XG4gICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKHNhdmVCdXR0b24pO1xuXG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQoc2hvd0l0ZW0pO1xuICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KHNob3dJdGVtLmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIikpO1xuICAgICAgICBhY3RpdmVBcnJheS5wb3AoYWN0aXZlQXJyYXlbaW5kZXhdKTtcbiAgICAgICAgc2hvd0l0ZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1lZGl0aW5nXCIsIFwiZmFsc2VcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRGl2IElTIE5PVCBiZWluZyBlZGl0ZWQgcmlnaHQgbm93LlwiKTtcbiAgICB9KTtcblxuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgICAgICBjb25zdCBuZXdEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICBjb25zdCBuZXdEdWVEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIGNvbnN0IG5ld1ByaW9yaXR5ID0gc2hvd0l0ZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1wcmlvcml0eVwiLCBvcmlnaW5hbFByaW9yaXR5KTtcblxuICAgICAgICBuZXdUaXRsZS5pbm5lclRleHQgPSBvcmlnaW5hbFRpdGxlO1xuICAgICAgICBuZXdEZXNjcmlwdGlvbi5pbm5lclRleHQgPSBvcmlnaW5hbERlc2NyaXB0aW9uO1xuICAgICAgICBuZXdEZXNjcmlwdGlvbi5zdHlsZS5mb250U3R5bGUgPSBcIml0YWxpY1wiO1xuICAgICAgICBuZXdEdWVEYXRlLmlubmVyVGV4dCA9IG9yaWdpbmFsRHVlRGF0ZTtcblxuICAgICAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChuZXdUaXRsZSk7XG4gICAgICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKG5ld0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQobmV3RHVlRGF0ZSk7XG5cbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoaW5wdXRUaXRsZSk7XG4gICAgICAgIHNob3dJdGVtLnJlbW92ZUNoaWxkKGlucHV0RGVzY3JpcHRpb24pO1xuICAgICAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChpbnB1dER1ZURhdGUpO1xuICAgICAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChpbnB1dFByaW9yaXR5KTtcblxuICAgICAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChzYXZlQnV0dG9uKTtcbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoY2xvc2VCdXR0b24pO1xuICAgICAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChkZWxldGVCdXR0b24pO1xuXG4gICAgICAgIGNoZWNrYm94LmRpc2FibGVkID0gZmFsc2U7XG5cbiAgICAgICAgc2hvd0l0ZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1lZGl0aW5nXCIsIFwiZmFsc2VcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRGl2IElTIE5PVCBiZWluZyBlZGl0ZWQgcmlnaHQgbm93LlwiKTtcbiAgICB9KVxuXG4gICAgc2F2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgY29uc3QgbmV3RGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgY29uc3QgbmV3RHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuXG4gICAgICAgIG5ld1RpdGxlLmlubmVyVGV4dCA9IGlucHV0VGl0bGUudmFsdWU7XG4gICAgICAgIG5ld0Rlc2NyaXB0aW9uLmlubmVyVGV4dCA9IGlucHV0RGVzY3JpcHRpb24udmFsdWU7XG4gICAgICAgIG5ld0Rlc2NyaXB0aW9uLnN0eWxlLmZvbnRTdHlsZSA9IFwiaXRhbGljXCI7XG4gICAgICAgIG5ld0R1ZURhdGUuaW5uZXJUZXh0ID0gaW5wdXREdWVEYXRlLnZhbHVlO1xuXG4gICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoc2hvd0l0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiKSk7XG4gICAgICAgIGFjdGl2ZUFycmF5W2luZGV4XS50aXRsZSA9IGlucHV0VGl0bGUudmFsdWU7XG4gICAgICAgIGFjdGl2ZUFycmF5W2luZGV4XS5kZXNjcmlwdGlvbiA9IGlucHV0RGVzY3JpcHRpb24udmFsdWU7XG4gICAgICAgIGFjdGl2ZUFycmF5W2luZGV4XS5kdWVEYXRlPSBpbnB1dER1ZURhdGUudmFsdWU7XG4gICAgICAgIGFjdGl2ZUFycmF5W2luZGV4XS5wcmlvcml0eSA9IGlucHV0UHJpb3JpdHkudmFsdWU7XG5cbiAgICAgICAgcHJpb3JpdHkgPSBpbnB1dFByaW9yaXR5LnZhbHVlO1xuXG4gICAgICAgIHNldHRpbmdQcmlvcml0eShzaG93SXRlbSk7XG5cbiAgICAgICAgY29uc3QgbmV3UHJpb3JpdHkgPSBzaG93SXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXByaW9yaXR5XCIsIGlucHV0UHJpb3JpdHkudmFsdWUpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGFjdGl2ZUFycmF5W2luZGV4XSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2F2ZWQgaXRlbSdzIHByaW9yaXR5IGlzOiBcIiArIGFjdGl2ZUFycmF5W2luZGV4XS5wcmlvcml0eSk7XG5cbiAgICAgICAgc2hvd0l0ZW0uYXBwZW5kQ2hpbGQobmV3VGl0bGUpO1xuICAgICAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChuZXdEZXNjcmlwdGlvbik7XG4gICAgICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKG5ld0R1ZURhdGUpO1xuXG4gICAgICAgIHNob3dJdGVtLnJlbW92ZUNoaWxkKGlucHV0VGl0bGUpO1xuICAgICAgICBzaG93SXRlbS5yZW1vdmVDaGlsZChpbnB1dERlc2NyaXB0aW9uKTtcbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoaW5wdXREdWVEYXRlKTtcbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoaW5wdXRQcmlvcml0eSk7XG5cbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoc2F2ZUJ1dHRvbik7XG4gICAgICAgIHNob3dJdGVtLnJlbW92ZUNoaWxkKGNsb3NlQnV0dG9uKTtcbiAgICAgICAgc2hvd0l0ZW0ucmVtb3ZlQ2hpbGQoZGVsZXRlQnV0dG9uKTtcblxuICAgICAgICBjaGVja2JveC5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gICAgICAgIHNob3dJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtZWRpdGluZ1wiLCBcImZhbHNlXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkRpdiBJUyBOT1QgYmVpbmcgZWRpdGVkIHJpZ2h0IG5vdy5cIik7XG4gICAgfSk7XG5cbn0iLCJpbXBvcnQgeyBjaGVja0NoZWNrYm94IH0gZnJvbSBcIi4vY2hlY2tDaGVja2JveC5qc1wiO1xuaW1wb3J0IHsgcHJpb3JpdHkgfSBmcm9tIFwiLi9jcmVhdGVUb2RvSXRlbS5qc1wiO1xuaW1wb3J0IHsgZWRpdFNob3dJdGVtIH0gZnJvbSBcIi4vZWRpdFNob3dJdGVtLmpzXCI7XG5pbXBvcnQgeyBhY3RpdmVBcnJheSB9IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBzZXR0aW5nUHJpb3JpdHkgfSBmcm9tIFwiLi9zZXR0aW5nUHJpb3JpdHkuanNcIjtcblxuY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbmV4cG9ydCB7IGNvbnRlbnQgfTtcbmV4cG9ydCBsZXQgc2hvd0l0ZW07XG5cbmV4cG9ydCBsZXQgZGlzcGxheWVkSXRlbXMgPSAwO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hvd2luZ0l0ZW1zKGFjdGl2ZUFycmF5KSB7XG5cbiAgICBmb3IgKGxldCBpID0gZGlzcGxheWVkSXRlbXM7IGkgPCBhY3RpdmVBcnJheS5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIHNob3dJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGNoZWNrYm94LnR5cGUgPSBcImNoZWNrYm94XCI7XG4gICAgICAgIGNoZWNrYm94LmNsYXNzTGlzdC5hZGQoXCJjaGVja2JveFwiKTtcbiAgICAgICAgY29uc3Qgc2hvd1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY29uc3Qgc2hvd0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY29uc3Qgc2hvd0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBzaG93VGl0bGUuaW5uZXJIVE1MID1cIjxoMz5cIiArIGFjdGl2ZUFycmF5W2ldLnRpdGxlICsgXCI8L2gzPlwiO1xuICAgICAgICBzaG93RGVzY3JpcHRpb24uaW5uZXJIVE1MID1cIjxwPlwiICsgYWN0aXZlQXJyYXlbaV0uZGVzY3JpcHRpb24gKyBcIjwvcD5cIjtcbiAgICAgICAgc2hvd0R1ZURhdGUuaW5uZXJIVE1MID1cIjxwPlwiICsgYWN0aXZlQXJyYXlbaV0uZHVlRGF0ZSArIFwiPC9wPlwiO1xuICAgIFxuICAgICAgICBwcmlvcml0eSA9IGFjdGl2ZUFycmF5W2ldLnByaW9yaXR5O1xuXG4gICAgICAgIHNldHRpbmdQcmlvcml0eShzaG93SXRlbSk7XG4gICAgXG4gICAgICAgIHNob3dJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtcHJpb3JpdHlcIiwgcHJpb3JpdHkpO1xuICAgICAgICBzaG93SXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIsIGkpO1xuICAgICAgICBzaG93SXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNoZWNrZWRcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgc2hvd0l0ZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1lZGl0aW5nXCIsIFwiZmFsc2VcIik7XG5cbiAgICAgICAgaWYgKGFjdGl2ZUFycmF5W2ldLmNoZWNrZWQgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBzaG93SXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNoZWNrZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgc2hvd0l0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmVlblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICBzaG93SXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNoZWNrZWRcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBzaG93SXRlbS5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKHNob3dUaXRsZSk7XG4gICAgICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKHNob3dEZXNjcmlwdGlvbik7XG4gICAgICAgIHNob3dJdGVtLmFwcGVuZENoaWxkKHNob3dEdWVEYXRlKTtcbiAgICAgICAgc2hvd0l0ZW0uY2xhc3NMaXN0LmFkZChcInNob3dJdGVtRGl2XCIpO1xuICAgICAgICBzaG93RGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcInNob3dEZXNjcmlwdGlvblwiKTtcbiAgICBcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChzaG93SXRlbSk7XG4gICAgXG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tDaGVja2JveCk7XG4gICAgXG4gICAgICAgIHNob3dJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09IHNob3dJdGVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNob3dJdGVtLmdldEF0dHJpYnV0ZShcImRhdGEtY2hlY2tlZFwiKSA9PSBcImZhbHNlXCIgJiYgc2hvd0l0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1lZGl0aW5nXCIpID09IFwiZmFsc2VcIikge1xuICAgICAgICAgICAgICAgICAgICBlZGl0U2hvd0l0ZW0oZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYWN0aXZlQXJyYXlbaV0uZGlzcGxheWVkID0gdHJ1ZTtcbiAgICAgICAgZGlzcGxheWVkSXRlbXMrKztcbiAgICBcbiAgICB9XG4gICAgXG59IiwiaW1wb3J0IHsgc2hvd2luZ0l0ZW1zIH0gZnJvbSBcIi4vc2hvd2luZ0l0ZW1zLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVUb2RvSXRlbUZ1bmMgfSBmcm9tICBcIi4vY3JlYXRlVG9kb0l0ZW0uanNcIjtcbmltcG9ydCB7IGNsZWFyQ29udGVudCB9IGZyb20gXCIuL2NsZWFyQ29udGVudC5qc1wiO1xuaW1wb3J0IHsgYWN0aXZlQXJyYXksIGNyZWF0ZU5ld1Byb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0cy5qc1wiO1xuXG5jb25zdCBkaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpYWxvZ1wiKVswXTtcbmV4cG9ydCB7IGRpYWxvZyB9O1xuY29uc3QgYWRkSXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkSXRlbVwiKTtcbmNvbnN0IGNsb3NlRGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZURpYWxvZ1wiKTtcblxuY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZm9ybVwiKVswXTtcblxuYWRkSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4ge1xuICAgIGRpYWxvZy5zaG93TW9kYWwoKTtcbiAgICBmb3JtLnJlc2V0KCk7XG59KTtcblxuY2xvc2VEaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHtcbiAgICBkaWFsb2cuY2xvc2UoKTtcbn0pO1xuXG5leHBvcnQgY2xhc3MgSXRlbSB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIH07XG59XG5cbmNvbnN0IGNyZWF0ZVRvZG9JdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjcmVhdGVUb2RvSXRlbVwiKTtcblxuY3JlYXRlVG9kb0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY3JlYXRlVG9kb0l0ZW1GdW5jKGFjdGl2ZUFycmF5KTtcbn0pO1xuXG5leHBvcnQgY29uc3QgbmV3UHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UHJvamVjdFwiKTtcbmV4cG9ydCBjb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdHNcIik7XG5cbm5ld1Byb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZU5ld1Byb2plY3QpIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY2xlYXJDb250ZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsImluYm94IiwiaW5ib3hBcnJheSIsImFsbFByb2plY3RzIiwicHVzaCIsImFjdGl2ZUFycmF5IiwicHJpb3JpdHkiLCJhbGxQcm9qZWN0QXJyYXlzIiwic2V0dGluZ1ByaW9yaXR5Iiwic2hvd0l0ZW0iLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImNoZWNrQ2hlY2tib3giLCJldmVudCIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJjaGVja2VkIiwiY29uc29sZSIsImxvZyIsInNldEF0dHJpYnV0ZSIsImluZGV4IiwiZWRpdFNob3dJdGVtIiwiaW5wdXRUaXRsZSIsImNyZWF0ZUVsZW1lbnQiLCJpbnB1dERlc2NyaXB0aW9uIiwiaW5wdXREdWVEYXRlIiwiaW5wdXRQcmlvcml0eSIsIm9wdGlvbkxvdyIsIm9wdGlvbk5vcm1hbCIsIm9wdGlvbkhpZ2giLCJpbm5lclRleHQiLCJjaGlsZHJlbiIsImNoZWNrYm94IiwiaXRlbSIsIm9yaWdpbmFsVGl0bGUiLCJvcmlnaW5hbERlc2NyaXB0aW9uIiwib3JpZ2luYWxEdWVEYXRlIiwib3JpZ2luYWxQcmlvcml0eSIsImRpc2FibGVkIiwidmFsdWUiLCJhcHBlbmRDaGlsZCIsInNlbGVjdGVkIiwidHlwZSIsInJlbW92ZUNoaWxkIiwic2F2ZUJ1dHRvbiIsImNsb3NlQnV0dG9uIiwiZGVsZXRlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRlbnQiLCJwYXJzZUludCIsInBvcCIsIm5ld1RpdGxlIiwibmV3RGVzY3JpcHRpb24iLCJuZXdEdWVEYXRlIiwiZm9udFN0eWxlIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJpIiwibGVuZ3RoIiwicmVtb3ZlIiwiZGlzcGxheWVkIiwiZGlzcGxheWVkSXRlbXMiLCJjb250YWlucyIsInNob3dpbmdJdGVtcyIsInNob3dUaXRsZSIsInNob3dEZXNjcmlwdGlvbiIsInNob3dEdWVEYXRlIiwiZSIsImRpYWxvZyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYWRkSXRlbSIsImNsb3NlRGlhbG9nIiwic2hvd01vZGFsIiwicmVzZXQiLCJjbG9zZSIsIkl0ZW0iLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJhbGVydCIsImNyZWF0ZVRvZG9JdGVtRnVuYyIsIm5ld1Byb2plY3RCdXR0b24iLCJwcm9qZWN0cyIsInByb2plY3QiLCJwcm9qZWN0TmFtZUlucHV0IiwicHJvamVjdFNhdmUiLCJwcm9qZWN0RXhpdCIsInBhZGRpbmciLCJtYXhIZWlnaHQiLCJtYXhXaWR0aCIsImZvbnRTaXplIiwiY29sb3IiLCJtYXJnaW5Ub3AiLCJuYW1lIiwiQXJyYXkiXSwic291cmNlUm9vdCI6IiJ9